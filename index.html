<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risparmio Energetico Fotovoltaico</title>
    <!-- Caricamento Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Sfondo scuro generale */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #1c1c1c; /* Sfondo scuro del body */
            color: #fff;         /* Testo in bianco */
            line-height: 1.6;
        }

        /* Container principale su sfondo leggermente più chiaro per contrasto */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: #2c2c2c; /* Sfondo del container */
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        h2, h3 {
            color: #ffffff;
        }

        p {
            margin: 10px 0;
            color: #ffffff;
        }

        /* Campi di input bianchi in evidenza */
        input, select {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fff;   /* Sfondo bianco */
            color: #000;        /* Testo nero */
        }

        /* Stile del pulsante */
        button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: #5a5a5a; /* Sfondo bottone grigio scuro */
            color: #fff;         /* Testo bottone in bianco */
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background: #757575;
        }

        .graph-container {
            margin-top: 20px;
        }

        canvas {
            display: block;
            margin: 0 auto;
            background: #fff; /* sfondo chiaro per il grafico (opzionale) */
        }

        /* Box in fondo con testo completamente bianco */
        .call-to-action {
            text-align: center;
            padding: 20px;
            background: #2c3e50; /* Sfondo scuro */
            color: #ffffff;      /* Testo bianco */
            border-radius: 8px;
            margin-top: 30px;
        }

        /* Link in call-to-action in bianco */
        .call-to-action a {
            color: #ffffff;
            text-decoration: none;
            font-weight: bold;
        }

        /* Footer scuro con testo bianco */
        footer {
            text-align: center;
            padding: 15px;
            background: #2c3e50;
            color: #fff;
            font-size: 14px;
        }

        footer p {
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Calcola il Risparmio Energetico del Tuo Impianto Fotovoltaico</h2>
        <p>Scopri quanto puoi risparmiare installando un impianto fotovoltaico. Usa il nostro calcolatore per stimare il tuo risparmio economico, ambientale e il ritorno sull'investimento.</p>

        <div class="calculator">
            <h3>Inserisci i tuoi dati</h3>
            <label for="annualConsumption">Consumo annuale (kWh):</label>
            <input type="number" id="annualConsumption" placeholder="Inserisci il consumo annuale">

            <label for="annualCost">Spesa annuale (€):</label>
            <input type="number" id="annualCost" placeholder="Inserisci la spesa annuale">

            <label for="region">Area geografica:</label>
            <select id="region">
                <option value="1000">Nord</option>
                <option value="1200">Centro</option>
                <option value="1400">Sud</option>
            </select>

            <label for="roofArea">Superficie del tetto (m²):</label>
            <input type="number" id="roofArea" placeholder="Inserisci la superficie disponibile">

            <label for="efficiency">Efficienza stimata dell’impianto (%):</label>
            <input type="number" id="efficiency" value="80" placeholder="Inserisci l'efficienza stimata">

            <label for="energyCost">Costo attuale dell'energia (€ per kWh):</label>
            <input type="number" id="energyCost" value="0.25" step="0.01">

            <label for="investmentDuration">Durata dell’investimento (anni):</label>
            <input type="number" id="investmentDuration" value="25">

            <button onclick="calculate()">Calcola Risparmio</button>

            <h3>Risultati:</h3>
            <p>Potenza installabile: <span id="installablePower">0</span> kWp</p>
            <p>Produzione annua stimata: <span id="annualProduction">0</span> kWh</p>
            <p>Risparmio economico annuo: <span id="annualSavings">0</span> €</p>
            <p>Emissioni di CO₂ evitate annue: <span id="co2Savings">0</span> kg</p>
            <p>Costo totale impianto: <span id="totalSystemCost">0</span> €</p>
            <p>Ritorno sull’investimento: <span id="roi">0</span> anni</p>
            <p>Risparmio totale in <span id="totalYears">0</span> anni: <span id="totalSavings">0</span> €</p>
        </div>

        <div class="graph-container">
            <h3>Grafico del Risparmio Cumulativo e ROI</h3>
            <canvas id="savingsChart" width="400" height="200"></canvas>
        </div>

        <!-- Box in fondo con testo completamente bianco -->
        <div class="call-to-action">
            <h3>Vuoi saperne di più?</h3>
            <p>Contattaci per una consulenza personalizzata. Insieme possiamo valutare il miglior impianto fotovoltaico per le tue esigenze.</p>
            <p>Scrivici subito o chiamaci al <strong>+39 123 456 7890</strong>.</p>
        </div>
    </div>

    <footer>
        <p>Calcolatore Fotovoltaico - Tutti i diritti riservati Greenidea © 2025</p>
    </footer>

    <script>
        function calculate() {
            const annualConsumption = parseFloat(document.getElementById('annualConsumption').value);
            const annualCost = parseFloat(document.getElementById('annualCost').value);
            const regionFactor = parseFloat(document.getElementById('region').value);
            const roofArea = parseFloat(document.getElementById('roofArea').value);
            const efficiency = parseFloat(document.getElementById('efficiency').value) / 100;
            const energyCost = parseFloat(document.getElementById('energyCost').value);
            const investmentDuration = parseFloat(document.getElementById('investmentDuration').value);

            if (isNaN(annualConsumption) || isNaN(annualCost) || isNaN(roofArea)) {
                alert("Inserisci tutti i dati richiesti!");
                return;
            }

            // Calcolo potenza installabile
            const installablePower = Math.floor((roofArea / 100) * 12); // 12 kWp per 100 m²
            // Produzione annua stimata
            const annualProduction = Math.floor(installablePower * regionFactor);
            // Autoconsumo
            const autoconsumption = Math.floor(annualProduction * efficiency);
            // Risparmio annuo
            const annualSavings = Math.floor(autoconsumption * energyCost);
            // Costo impianto
            const systemCostPerKW = installablePower < 50 ? 2000 : installablePower < 1000 ? 1200 : 800;
            const totalSystemCost = Math.floor(installablePower * systemCostPerKW);
            // Ritorno sull'investimento
            const roi = Math.floor(totalSystemCost / annualSavings);
            // Risparmio totale su X anni
            const totalSavings = Math.floor(annualSavings * investmentDuration);
            // Emissioni CO2 evitate
            const co2Savings = Math.floor(annualProduction * 0.4); // 0.4 kg CO2 per kWh

            document.getElementById('installablePower').textContent = installablePower;
            document.getElementById('annualProduction').textContent = annualProduction;
            document.getElementById('annualSavings').textContent = annualSavings;
            document.getElementById('co2Savings').textContent = co2Savings;
            document.getElementById('totalSystemCost').textContent = totalSystemCost;
            document.getElementById('roi').textContent = roi;
            document.getElementById('totalYears').textContent = investmentDuration;
            document.getElementById('totalSavings').textContent = totalSavings;

            updateChart(annualSavings, investmentDuration);
        }

        function updateChart(annualSavings, duration) {
            const ctx = document.getElementById('savingsChart').getContext('2d');
            const yearlySavings = Array.from({ length: duration }, (_, i) => annualSavings * (i + 1));

            // Distrugge il grafico precedente se esiste (per aggiornare correttamente)
            if (window.savingsChart) {
                window.savingsChart.destroy();
            }

            window.savingsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({ length: duration }, (_, i) => `Anno ${i + 1}`),
                    datasets: [{
                        label: 'Risparmio Cumulativo (€)',
                        data: yearlySavings,
                        borderColor: '#2c3e50',
                        tension: 0.2,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        x: { title: { display: true, text: 'Anni' } },
                        y: { title: { display: true, text: 'Risparmio (€)' } }
                    }
                }
            });
        }
    </script>
</body>
</html>

